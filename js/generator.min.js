/* Copyright (c) 2008-2018 Philip Hutchison */
$(function(){var generateMarkup=function(){var form=document.querySelector("#pdfCodeGeneratorForm");var embedtype=form.embedtype.value!==""?form.embedtype.value:false;var targetElement=form.targetElement.value!==""?form.targetElement.value:false;var pdfURL=form.pdfURL.value!==""?form.pdfURL.value:false;var scrollbar=form.scrollbar.value!==""?form.scrollbar.value:false;var toolbar=form.toolbar.value!==""?form.toolbar.value:false;var statusbar=form.statusbar.value!==""?form.statusbar.value:false;var messages=form.messages.value!==""?form.messages.value:false;var navpanes=form.navpanes.value!==""?form.navpanes.value:false;var pagemode=form.pagemode.value!==""?form.pagemode.value:false;var nameddest=form.nameddest.value!==""?form.nameddest.value:false;var page=form.page.value!==""?form.page.value:false;var zoom_percent=form.zoom_percent.value!==""?form.zoom_percent.value:false;var zoom_x=form.zoom_x.value!==""?form.zoom_x.value:false;var zoom_y=form.zoom_y.value!==""?form.zoom_y.value:false;var view=form.view.value!==""?form.view.value:false;var view_offset=form.view_offset.value!==""?form.view_offset.value:false;var viewrect_w=form.viewrect_w.value!==""?form.viewrect_w.value:false;var viewrect_h=form.viewrect_h.value!==""?form.viewrect_h.value:false;var viewrect_x=form.viewrect_x.value!==""?form.viewrect_x.value:false;var viewrect_y=form.viewrect_y.value!==""?form.viewrect_y.value:false;var fdf=form.fdf.value!==""?form.fdf.value:false;var comment=form.comment.value!==""?form.comment.value:false;var highlight_w=form.highlight_w.value!==""?form.highlight_w.value:false;var highlight_h=form.highlight_h.value!==""?form.highlight_h.value:false;var highlight_x=form.highlight_x.value!==""?form.highlight_x.value:false;var highlight_y=form.highlight_y.value!==""?form.highlight_y.value:false;var search=form.search.value!==""?form.search.value:false;var pdfAltContent=form.pdfAltContent.value!==""?form.pdfAltContent.value.replace(/</g,"&lt;").replace(/'/g,"\\'"):"";var defaultFallback='&lt;p>This browser does not support inline PDFs. Please download the PDF to view it: &lt;a href="[url]">Download PDF&lt;/a>&lt;/p>';var fallbackUsesDefault=defaultFallback===pdfAltContent;var isForJavaScript=embedtype==="javascript";var pdfparams_arr=[];var pdfOpenParamsString="";var pdfOpenParamsString_separator=isForJavaScript?", ":"&";var zoom="";var markup="";var options="";var createObjectString=function(key,value){return key+": "+"'"+value+"'"};var createUrlString=function(key,value){return key+"="+value};var createParamString=function(key,value){return isForJavaScript?createObjectString(key,value):createUrlString(key,value)};if(nameddest){pdfparams_arr[pdfparams_arr.length]=createParamString("nameddest",nameddest)}if(page){pdfparams_arr[pdfparams_arr.length]=createParamString("page",page)}if(comment){pdfparams_arr[pdfparams_arr.length]=createParamString("comment",comment)}if($.isNumeric(zoom_percent)&&zoom_percent>0){zoom=zoom_percent;if($.isNumeric(zoom_x)&&$.isNumeric(zoom_y)){zoom+=","+zoom_x+","+zoom_y}pdfparams_arr[pdfparams_arr.length]=createParamString("zoom",zoom)}if(view){if($.isNumeric(view_offset)){view+=","+view_offset}pdfparams_arr[pdfparams_arr.length]=createParamString("view",view)}if($.isNumeric(viewrect_w)&&$.isNumeric(viewrect_h)&&$.isNumeric(viewrect_x)&&$.isNumeric(viewrect_y)){pdfparams_arr[pdfparams_arr.length]=createParamString("viewrect",viewrect_x+","+viewrect_y+","+viewrect_w+","+viewrect_h)}if(pagemode){pdfparams_arr[pdfparams_arr.length]=createParamString("pagemode",pagemode)}if($.isNumeric(scrollbar)){pdfparams_arr[pdfparams_arr.length]=createParamString("scrollbar",scrollbar)}if(search){if(!isForJavaScript){search=encodeURIComponent(search)}pdfparams_arr[pdfparams_arr.length]=createParamString("search",search)}if($.isNumeric(toolbar)){pdfparams_arr[pdfparams_arr.length]=createParamString("toolbar",toolbar)}if($.isNumeric(statusbar)){pdfparams_arr[pdfparams_arr.length]=createParamString("statusbar",statusbar)}if($.isNumeric(messages)){pdfparams_arr[pdfparams_arr.length]=createParamString("messages",messages)}if($.isNumeric(navpanes)){pdfparams_arr[pdfparams_arr.length]=createParamString("navpanes",navpanes)}if($.isNumeric(highlight_w)&&$.isNumeric(highlight_h)&&$.isNumeric(highlight_x)&&$.isNumeric(highlight_y)){pdfparams_arr[pdfparams_arr.length]=createParamString("highlight",highlight_x+","+highlight_y+","+highlight_w+","+highlight_h)}if(fdf){pdfparams_arr[pdfparams_arr.length]=createParamString("fdf",fdf)}if(!isForJavaScript&&pdfAltContent){pdfAltContent=pdfAltContent.replace(/\[url\]/g,pdfURL)}for(var i=0;i<pdfparams_arr.length;i++){pdfOpenParamsString+=pdfparams_arr[i];if(i!==pdfparams_arr.length-1){pdfOpenParamsString+=pdfOpenParamsString_separator}}if(isForJavaScript){if(pdfparams_arr.length||!fallbackUsesDefault){options="var options = {\n";if(pdfparams_arr.length){options+="   pdfOpenParams: { "+pdfOpenParamsString+" }";if(!fallbackUsesDefault){options+=","}options+="\n"}if(!fallbackUsesDefault){options+="   fallbackLink: '"+pdfAltContent+"'\n"}options+="};\n\n"}markup="&lt;!-- insert just before the closing body tag &lt;/body&gt; --&gt;\n";markup+="&lt;script src='/path-to-your-javascript-file/pdfobject.js'&gt;&lt;/script&gt;\n";markup+="&lt;script&gt;\n";if(!targetElement&&!pdfparams_arr.length&&fallbackUsesDefault){markup+='PDFObject.embed("'+pdfURL+'");\n'}else{if(targetElement){targetElement='"'+targetElement+'"';markup+="//Be sure your document contains an element with the CSS selector "+targetElement+"\n";if(!pdfparams_arr.length&&fallbackUsesDefault){markup+='PDFObject.embed("'+pdfURL+'", '+targetElement+");\n"}else{markup+=options;markup+='PDFObject.embed("'+pdfURL+'", '+targetElement+", options);\n"}}else{markup+=options;markup+='PDFObject.embed("'+pdfURL+'", false, options);\n'}}markup+="&lt;/script&gt;"}else{if(pdfparams_arr.length){pdfOpenParamsString="#"+pdfOpenParamsString}markup="&lt;!-- insert in the document body --&gt;\n"+"&lt;object data='"+pdfURL+pdfOpenParamsString+"' \n"+"        type='application/pdf' \n"+"        width='100%' \n"+"        height='100%'&gt;\n"+pdfAltContent+"\n"+"&lt;/object&gt;"}return"<h3>Your custom code:</h3><pre><code class='language-html'>"+markup+"</code></pre>"};var addOptionsButton=function(){var showtxt="Customize PDF Open Parameters";var hidetxt="Hide PDF Open options";var $pdfopenoptions=$("#pdfopenoptions");var $div=$("<div>").attr("id","toggleButton");var $btn=$("<input type='button' />").addClass("pure-button").val(showtxt).on("click",function(e){e.preventDefault();$pdfopenoptions.toggle();var $b=$(this);if($b.val()===showtxt){$b.val(hidetxt).addClass("hide")}else{$b.val(showtxt).removeClass("hide")}return false}).appendTo($div);$div.insertBefore($pdfopenoptions);$pdfopenoptions.hide()};var setModeOptions=function(mode){var $targetEl=$("#targetElement");var $parent=$targetEl.parent(".form-element-wrapper");if(mode==="javascript"){$targetEl.prop("disabled",false);$parent.show()}else if(mode==="markup"){$targetEl.prop("disabled","disabled");$parent.hide()}};var $embedtype=$("#embedtype");$embedtype.on("change",function(e){setModeOptions(this.value)});$("[data-has-relationship='true']").on("change",function(e){var element=this;var form=document.querySelector("#pdfCodeGeneratorForm");var bool=false;switch(element.id){case"toolbar":bool=element.value!==""&&parseInt(element.value,10)===0;form.pagemode.disabled=bool;break;case"page":bool=element.value!=="";form.nameddest.disabled=bool;break;case"nameddest":bool=element.value!=="";form.page.disabled=bool;break;case"zoom_percent":case"zoom_x":case"zoom_y":bool=form.zoom_percent.value!==""||form.zoom_x.value!==""||form.zoom_y.value!=="";form.view.disabled=bool;form.view_offset.disabled=bool;form.viewrect_w.disabled=bool;form.viewrect_h.disabled=bool;form.viewrect_x.disabled=bool;form.viewrect_y.disabled=bool;break;case"view":bool=element.value!=="";form.zoom_percent.disabled=bool;form.zoom_x.disabled=bool;form.zoom_y.disabled=bool;form.viewrect_w.disabled=bool;form.viewrect_h.disabled=bool;form.viewrect_x.disabled=bool;form.viewrect_y.disabled=bool;break;case"viewrect_w":case"viewrect_h":case"viewrect_x":case"viewrect_y":bool=form.viewrect_w.value!==""||form.viewrect_h.value!==""||form.viewrect_x.value!==""||form.viewrect_y.value!=="";form.view.disabled=bool;form.view_offset.disabled=bool;form.zoom_percent.disabled=bool;form.zoom_x.disabled=bool;form.zoom_y.disabled=bool;break}});$("#pdfCodeGeneratorForm").on("submit",function(e){e.preventDefault();$("#generatedCode").html(generateMarkup());Prism.highlightAll();$("html, body").animate({scrollTop:$("#generatedCode").offset().top},500)});addOptionsButton();setModeOptions($embedtype.val())});